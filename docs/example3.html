<!DOCTYPE html>
<html>
  <head>
    <link href="css/tutorial.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div class="content">
      <a href="index.html" class="menu">home</a>
      <h1>Example 3: Lemon or Lime</h1>
      <span class="date">August 1, 2018</span>
      <p>While grocery stores typically stock green limes in their fresh produce section, a lime will actually turn yellow when fully ripe. When fully ripe, they look very similar to lemons, which turn yellow just as they begin to ripen. People who have both a lemon tree and a lime tree in their backyard need to learn other ways to tell them apart, else they run the risk of stirring up a lemon margarita. The natural approach is to be an empiricist, and learn to classify based on the the conditional probabilities that connect limes and lemons to their features.</p>
      <p>Here is a table that summarizes the features of 1000 observations of lemons and limes.</p>
      <table>
	<tr>
	  <th>Fruit</th>
	  <th>Count</th>
	  <th>Yellow</th>
	  <th>Not yellow</th>
	  <th>Round</th>
	  <th>Not round</th>
	</tr>
	<tr>
	  <td>Lime</td>
	  <td>600</td>
	  <td>550</td>
	  <td>50</td>
	  <td>300</td>
	  <td>300</td>
	</tr>
	<tr>
	  <td>Lemon</td>
	  <td>400</td>
	  <td>350</td>
	  <td>50</td>
	  <td>30</td>
	  <td>370</td>
	</tr>
	<tr>
	  <td>Total</td>
	  <td>1000</td>
	  <td>900</td>
	  <td>100</td>
	  <td>330</td>
	  <td>670</td>
	</tr>
      </table>

      <p>Given a table of this sort, we should be able to make an educated guess about whether we've got a lemon or a lime in our hand, based on whether it or not it is yellow and if it is round. Let's use Etcetera Abduction to automatically make the classification for us.</p>

      <p>First, we'll establish the prior probabilities of our two class labels, <code>lemon</code> and <code>lime</code>. These numbers are simply the number of fruit in our sample of each type, divided by the total number (1000), encoded as follows:</p>

      <pre>;; Prior probabilities of class labels
(if (etc0_lime 0.6 x) (lime x)) ;; 600 / 1000
(if (etc0_lemon 0.4 x) (lemon x)) ;; 400 / 1000
</pre>

      <p>Second, we'll calculate all of the relevant conditional probabilities. For each of the four features, we calculate a conditional probability of the feature given a class label. This is simply the fraction of class instances that have the feature.</p>
      <pre>;; conditional probabilities of the features given the class
(if (and (lime x) (etc1_yellow 0.9166666667 x)) ;; 550 / 600
    (yellow x))
(if (and (lime x) (etc1_not_yellow 0.08333333333 x)) ;; 50 / 600
    (not_yellow x))
(if (and (lemon x) (etc2_yellow 0.875 x)) ;; 350 / 400
    (yellow x))
(if (and (lemon x) (etc2_not_yellow 0.125 x)) ;; 50 / 400
    (not_yellow x))
(if (and (lime x) (etc1_round 0.5 x)) ;; 300 / 600
    (round x))
(if (and (lime x) (etc1_not_round 0.5 x)) ;; 300 / 600
    (not_round x))
(if (and (lemon x) (etc2_round 0.075 x)) ;; 30 / 400
    (round x))
(if (and (lemon x) (etc2_not_round 0.925 x)) ;; 370 / 400
    (not_round x))
      </pre>

      <p>Third, we'll add the prior probabilities of the features. Yellow is a lot more common than not yellow, and not round is more common than round - at least according to the table above.</p>

      <pre>;; Prior probabilities of features

(if (etc0_yellow 0.9 x) (yellow x))
(if (etc0_not_yellow 0.1 x) (not_yellow x))
(if (etc0_round 0.33 x) (round x))
(if (etc0_not_round 0.67 x) (not_round x))
	</pre>
      
      <p>Finally, we'll need to specify the observables. Let's imagine that we are staring at four different fruit, each with their own unique combination of features, as follows:</p>
      <pre>;; Observables: Four different fruit

(yellow FRUIT1)
(not_round FRUIT1)

(yellow FRUIT2)
(round FRUIT2)

(not_yellow FRUIT3)
(not_round FRUIT3)

(not_yellow FRUIT4)
(round FRUIT4)
</pre>      
      <p>Now let's ask Etcetera Abduction to give us an interpretation, and then graph it out.</p>
      <pre>> python etcabductionpy -i lemon-lime.lisp -g | ./util/dot2safari</pre>

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="540pt" viewBox="0.00 0.00 1333.89 124.00">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 120)">
<title>proof</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-120 1329.8905,-120 1329.8905,4 -4,4"/>
<!-- n0 -->
<g id="node1" class="node">
<title>n0</title>
<ellipse fill="none" stroke="#000000" cx="83.2986" cy="-98" rx="83.0977" ry="18"/>
<text text-anchor="middle" x="83.2986" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_not_round 0.67</text>
</g>
<!-- n8 -->
<g id="node9" class="node">
<title>n8</title>
<polygon fill="none" stroke="#000000" points="150.1279,-40 16.4693,-40 16.4693,-4 150.1279,-4 150.1279,-40"/>
<polygon fill="none" stroke="#000000" points="154.1229,-44 12.4743,-44 12.4743,0 154.1229,0 154.1229,-44"/>
<text text-anchor="middle" x="83.2986" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(not_round FRUIT1)</text>
</g>
<!-- n0&#45;&gt;n8 -->
<g id="edge1" class="edge">
<title>n0-&gt;n8</title>
<path fill="none" stroke="#000000" d="M83.2986,-79.9891C83.2986,-72.291 83.2986,-63.0629 83.2986,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="86.7987,-54.2282 83.2986,-44.2282 79.7987,-54.2282 86.7987,-54.2282"/>
</g>
<!-- n1 -->
<g id="node2" class="node">
<title>n1</title>
<ellipse fill="none" stroke="#000000" cx="268.2986" cy="-98" rx="83.0977" ry="18"/>
<text text-anchor="middle" x="268.2986" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_not_round 0.67</text>
</g>
<!-- n9 -->
<g id="node10" class="node">
<title>n9</title>
<polygon fill="none" stroke="#000000" points="335.1279,-40 201.4693,-40 201.4693,-4 335.1279,-4 335.1279,-40"/>
<polygon fill="none" stroke="#000000" points="339.1229,-44 197.4743,-44 197.4743,0 339.1229,0 339.1229,-44"/>
<text text-anchor="middle" x="268.2986" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(not_round FRUIT3)</text>
</g>
<!-- n1&#45;&gt;n9 -->
<g id="edge2" class="edge">
<title>n1-&gt;n9</title>
<path fill="none" stroke="#000000" d="M268.2986,-79.9891C268.2986,-72.291 268.2986,-63.0629 268.2986,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="271.7987,-54.2282 268.2986,-44.2282 264.7987,-54.2282 271.7987,-54.2282"/>
</g>
<!-- n2 -->
<g id="node3" class="node">
<title>n2</title>
<ellipse fill="none" stroke="#000000" cx="452.2986" cy="-98" rx="82.1286" ry="18"/>
<text text-anchor="middle" x="452.2986" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_not_yellow 0.1</text>
</g>
<!-- n10 -->
<g id="node11" class="node">
<title>n10</title>
<polygon fill="none" stroke="#000000" points="522.0572,-40 382.54,-40 382.54,-4 522.0572,-4 522.0572,-40"/>
<polygon fill="none" stroke="#000000" points="526.0645,-44 378.5327,-44 378.5327,0 526.0645,0 526.0645,-44"/>
<text text-anchor="middle" x="452.2986" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(not_yellow FRUIT3)</text>
</g>
<!-- n2&#45;&gt;n10 -->
<g id="edge3" class="edge">
<title>n2-&gt;n10</title>
<path fill="none" stroke="#000000" d="M452.2986,-79.9891C452.2986,-72.291 452.2986,-63.0629 452.2986,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="455.7987,-54.2282 452.2986,-44.2282 448.7987,-54.2282 455.7987,-54.2282"/>
</g>
<!-- n3 -->
<g id="node4" class="node">
<title>n3</title>
<ellipse fill="none" stroke="#000000" cx="635.2986" cy="-98" rx="82.1286" ry="18"/>
<text text-anchor="middle" x="635.2986" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_not_yellow 0.1</text>
</g>
<!-- n11 -->
<g id="node12" class="node">
<title>n11</title>
<polygon fill="none" stroke="#000000" points="705.0572,-40 565.54,-40 565.54,-4 705.0572,-4 705.0572,-40"/>
<polygon fill="none" stroke="#000000" points="709.0645,-44 561.5327,-44 561.5327,0 709.0645,0 709.0645,-44"/>
<text text-anchor="middle" x="635.2986" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(not_yellow FRUIT4)</text>
</g>
<!-- n3&#45;&gt;n11 -->
<g id="edge4" class="edge">
<title>n3-&gt;n11</title>
<path fill="none" stroke="#000000" d="M635.2986,-79.9891C635.2986,-72.291 635.2986,-63.0629 635.2986,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="638.7987,-54.2282 635.2986,-44.2282 631.7987,-54.2282 638.7987,-54.2282"/>
</g>
<!-- n4 -->
<g id="node5" class="node">
<title>n4</title>
<ellipse fill="none" stroke="#000000" cx="803.2986" cy="-98" rx="67.6529" ry="18"/>
<text text-anchor="middle" x="803.2986" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_round 0.33</text>
</g>
<!-- n12 -->
<g id="node13" class="node">
<title>n12</title>
<polygon fill="none" stroke="#000000" points="857.7354,-40 748.8618,-40 748.8618,-4 857.7354,-4 857.7354,-40"/>
<polygon fill="none" stroke="#000000" points="861.7332,-44 744.864,-44 744.864,0 861.7332,0 861.7332,-44"/>
<text text-anchor="middle" x="803.2986" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(round FRUIT2)</text>
</g>
<!-- n4&#45;&gt;n12 -->
<g id="edge5" class="edge">
<title>n4-&gt;n12</title>
<path fill="none" stroke="#000000" d="M803.2986,-79.9891C803.2986,-72.291 803.2986,-63.0629 803.2986,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="806.7987,-54.2282 803.2986,-44.2282 799.7987,-54.2282 806.7987,-54.2282"/>
</g>
<!-- n5 -->
<g id="node6" class="node">
<title>n5</title>
<ellipse fill="none" stroke="#000000" cx="956.2986" cy="-98" rx="67.6529" ry="18"/>
<text text-anchor="middle" x="956.2986" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_round 0.33</text>
</g>
<!-- n13 -->
<g id="node14" class="node">
<title>n13</title>
<polygon fill="none" stroke="#000000" points="1010.7354,-40 901.8618,-40 901.8618,-4 1010.7354,-4 1010.7354,-40"/>
<polygon fill="none" stroke="#000000" points="1014.7332,-44 897.864,-44 897.864,0 1014.7332,0 1014.7332,-44"/>
<text text-anchor="middle" x="956.2986" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(round FRUIT4)</text>
</g>
<!-- n5&#45;&gt;n13 -->
<g id="edge6" class="edge">
<title>n5-&gt;n13</title>
<path fill="none" stroke="#000000" d="M956.2986,-79.9891C956.2986,-72.291 956.2986,-63.0629 956.2986,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="959.7987,-54.2282 956.2986,-44.2282 952.7987,-54.2282 959.7987,-54.2282"/>
</g>
<!-- n6 -->
<g id="node7" class="node">
<title>n6</title>
<ellipse fill="none" stroke="#000000" cx="1108.2986" cy="-98" rx="66.6839" ry="18"/>
<text text-anchor="middle" x="1108.2986" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_yellow 0.9</text>
</g>
<!-- n14 -->
<g id="node15" class="node">
<title>n14</title>
<polygon fill="none" stroke="#000000" points="1165.6628,-40 1050.9344,-40 1050.9344,-4 1165.6628,-4 1165.6628,-40"/>
<polygon fill="none" stroke="#000000" points="1169.6751,-44 1046.922,-44 1046.922,0 1169.6751,0 1169.6751,-44"/>
<text text-anchor="middle" x="1108.2986" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(yellow FRUIT1)</text>
</g>
<!-- n6&#45;&gt;n14 -->
<g id="edge7" class="edge">
<title>n6-&gt;n14</title>
<path fill="none" stroke="#000000" d="M1108.2986,-79.9891C1108.2986,-72.291 1108.2986,-63.0629 1108.2986,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="1111.7987,-54.2282 1108.2986,-44.2282 1104.7987,-54.2282 1111.7987,-54.2282"/>
</g>
<!-- n7 -->
<g id="node8" class="node">
<title>n7</title>
<ellipse fill="none" stroke="#000000" cx="1259.2986" cy="-98" rx="66.6839" ry="18"/>
<text text-anchor="middle" x="1259.2986" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_yellow 0.9</text>
</g>
<!-- n15 -->
<g id="node16" class="node">
<title>n15</title>
<polygon fill="none" stroke="#000000" points="1316.6628,-40 1201.9344,-40 1201.9344,-4 1316.6628,-4 1316.6628,-40"/>
<polygon fill="none" stroke="#000000" points="1320.6751,-44 1197.922,-44 1197.922,0 1320.6751,0 1320.6751,-44"/>
<text text-anchor="middle" x="1259.2986" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(yellow FRUIT2)</text>
</g>
<!-- n7&#45;&gt;n15 -->
<g id="edge8" class="edge">
<title>n7-&gt;n15</title>
<path fill="none" stroke="#000000" d="M1259.2986,-79.9891C1259.2986,-72.291 1259.2986,-63.0629 1259.2986,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="1262.7987,-54.2282 1259.2986,-44.2282 1255.7987,-54.2282 1262.7987,-54.2282"/>
</g>
</g>
</svg>
      

      <p>Uh oh. That doesn't look good. This is not at all what we were hoping for.</p>

      <p>According to this graph, the most probable interpretation does not assume that these fruits are lemons <u>or</u> limes. Instead, the most probable interpretation is that these features of roundness and yellowness sometimes happen in the world, and that its best just to accept this diversity without further explanation. That is, there is no particular reason to assume that these fruits belong to particular lime or lemon fruit categories. Or at least, we didn't express our desire to classify these fruits to the software.</p>

      <p>But our axioms look correct. Surely one of the possible interpretations has the classifications that we are looking for. Let's take a look at the <u>second</u>-most probable interpretation, using the -s (--solution) flag.</p>

      <pre>> python etcabductionpy -i lemon-lime.lisp -s 2 -g | ./util/dot2safari</pre>
      
      
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="540pt"  viewBox="0.00 0.00 1524.75 196.00">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 192)">
<title>proof</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-192 1520.7465,-192 1520.7465,4 -4,4"/>
<!-- n0 -->
<g id="node1" class="node">
<title>n0</title>
<ellipse fill="none" stroke="#000000" cx="195.1547" cy="-170" rx="58.4823" ry="18"/>
<text text-anchor="middle" x="195.1547" y="-165.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_lime 0.6</text>
</g>
<!-- n9 -->
<g id="node10" class="node">
<title>n9</title>
<polygon fill="none" stroke="#000000" points="245.8101,-116 144.4993,-116 144.4993,-80 245.8101,-80 245.8101,-116"/>
<text text-anchor="middle" x="195.1547" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">(lime FRUIT2)</text>
</g>
<!-- n0&#45;&gt;n9 -->
<g id="edge1" class="edge">
<title>n0-&gt;n9</title>
<path fill="none" stroke="#000000" d="M195.1547,-151.8314C195.1547,-144.131 195.1547,-134.9743 195.1547,-126.4166"/>
<polygon fill="#000000" stroke="#000000" points="198.6548,-126.4132 195.1547,-116.4133 191.6548,-126.4133 198.6548,-126.4132"/>
</g>
<!-- n1 -->
<g id="node2" class="node">
<title>n1</title>
<ellipse fill="none" stroke="#000000" cx="578.1547" cy="-98" rx="83.0977" ry="18"/>
<text text-anchor="middle" x="578.1547" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_not_round 0.67</text>
</g>
<!-- n10 -->
<g id="node11" class="node">
<title>n10</title>
<polygon fill="none" stroke="#000000" points="644.9839,-40 511.3254,-40 511.3254,-4 644.9839,-4 644.9839,-40"/>
<polygon fill="none" stroke="#000000" points="648.979,-44 507.3303,-44 507.3303,0 648.979,0 648.979,-44"/>
<text text-anchor="middle" x="578.1547" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(not_round FRUIT1)</text>
</g>
<!-- n1&#45;&gt;n10 -->
<g id="edge2" class="edge">
<title>n1-&gt;n10</title>
<path fill="none" stroke="#000000" d="M578.1547,-79.9891C578.1547,-72.291 578.1547,-63.0629 578.1547,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="581.6548,-54.2282 578.1547,-44.2282 574.6548,-54.2282 581.6548,-54.2282"/>
</g>
<!-- n2 -->
<g id="node3" class="node">
<title>n2</title>
<ellipse fill="none" stroke="#000000" cx="763.1547" cy="-98" rx="83.0977" ry="18"/>
<text text-anchor="middle" x="763.1547" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_not_round 0.67</text>
</g>
<!-- n11 -->
<g id="node12" class="node">
<title>n11</title>
<polygon fill="none" stroke="#000000" points="829.9839,-40 696.3254,-40 696.3254,-4 829.9839,-4 829.9839,-40"/>
<polygon fill="none" stroke="#000000" points="833.979,-44 692.3303,-44 692.3303,0 833.979,0 833.979,-44"/>
<text text-anchor="middle" x="763.1547" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(not_round FRUIT3)</text>
</g>
<!-- n2&#45;&gt;n11 -->
<g id="edge3" class="edge">
<title>n2-&gt;n11</title>
<path fill="none" stroke="#000000" d="M763.1547,-79.9891C763.1547,-72.291 763.1547,-63.0629 763.1547,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="766.6548,-54.2282 763.1547,-44.2282 759.6548,-54.2282 766.6548,-54.2282"/>
</g>
<!-- n3 -->
<g id="node4" class="node">
<title>n3</title>
<ellipse fill="none" stroke="#000000" cx="947.1547" cy="-98" rx="82.1286" ry="18"/>
<text text-anchor="middle" x="947.1547" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_not_yellow 0.1</text>
</g>
<!-- n12 -->
<g id="node13" class="node">
<title>n12</title>
<polygon fill="none" stroke="#000000" points="1016.9133,-40 877.396,-40 877.396,-4 1016.9133,-4 1016.9133,-40"/>
<polygon fill="none" stroke="#000000" points="1020.9205,-44 873.3888,-44 873.3888,0 1020.9205,0 1020.9205,-44"/>
<text text-anchor="middle" x="947.1547" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(not_yellow FRUIT3)</text>
</g>
<!-- n3&#45;&gt;n12 -->
<g id="edge4" class="edge">
<title>n3-&gt;n12</title>
<path fill="none" stroke="#000000" d="M947.1547,-79.9891C947.1547,-72.291 947.1547,-63.0629 947.1547,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="950.6548,-54.2282 947.1547,-44.2282 943.6548,-54.2282 950.6548,-54.2282"/>
</g>
<!-- n4 -->
<g id="node5" class="node">
<title>n4</title>
<ellipse fill="none" stroke="#000000" cx="1130.1547" cy="-98" rx="82.1286" ry="18"/>
<text text-anchor="middle" x="1130.1547" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_not_yellow 0.1</text>
</g>
<!-- n13 -->
<g id="node14" class="node">
<title>n13</title>
<polygon fill="none" stroke="#000000" points="1199.9133,-40 1060.396,-40 1060.396,-4 1199.9133,-4 1199.9133,-40"/>
<polygon fill="none" stroke="#000000" points="1203.9205,-44 1056.3888,-44 1056.3888,0 1203.9205,0 1203.9205,-44"/>
<text text-anchor="middle" x="1130.1547" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(not_yellow FRUIT4)</text>
</g>
<!-- n4&#45;&gt;n13 -->
<g id="edge5" class="edge">
<title>n4-&gt;n13</title>
<path fill="none" stroke="#000000" d="M1130.1547,-79.9891C1130.1547,-72.291 1130.1547,-63.0629 1130.1547,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="1133.6548,-54.2282 1130.1547,-44.2282 1126.6548,-54.2282 1133.6548,-54.2282"/>
</g>
<!-- n5 -->
<g id="node6" class="node">
<title>n5</title>
<ellipse fill="none" stroke="#000000" cx="1298.1547" cy="-98" rx="67.6529" ry="18"/>
<text text-anchor="middle" x="1298.1547" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_round 0.33</text>
</g>
<!-- n14 -->
<g id="node15" class="node">
<title>n14</title>
<polygon fill="none" stroke="#000000" points="1352.5915,-40 1243.7178,-40 1243.7178,-4 1352.5915,-4 1352.5915,-40"/>
<polygon fill="none" stroke="#000000" points="1356.5893,-44 1239.7201,-44 1239.7201,0 1356.5893,0 1356.5893,-44"/>
<text text-anchor="middle" x="1298.1547" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(round FRUIT4)</text>
</g>
<!-- n5&#45;&gt;n14 -->
<g id="edge6" class="edge">
<title>n5-&gt;n14</title>
<path fill="none" stroke="#000000" d="M1298.1547,-79.9891C1298.1547,-72.291 1298.1547,-63.0629 1298.1547,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="1301.6548,-54.2282 1298.1547,-44.2282 1294.6548,-54.2282 1301.6548,-54.2282"/>
</g>
<!-- n6 -->
<g id="node7" class="node">
<title>n6</title>
<ellipse fill="none" stroke="#000000" cx="1450.1547" cy="-98" rx="66.6839" ry="18"/>
<text text-anchor="middle" x="1450.1547" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc0_yellow 0.9</text>
</g>
<!-- n15 -->
<g id="node16" class="node">
<title>n15</title>
<polygon fill="none" stroke="#000000" points="1507.5189,-40 1392.7904,-40 1392.7904,-4 1507.5189,-4 1507.5189,-40"/>
<polygon fill="none" stroke="#000000" points="1511.5312,-44 1388.7781,-44 1388.7781,0 1511.5312,0 1511.5312,-44"/>
<text text-anchor="middle" x="1450.1547" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(yellow FRUIT1)</text>
</g>
<!-- n6&#45;&gt;n15 -->
<g id="edge7" class="edge">
<title>n6-&gt;n15</title>
<path fill="none" stroke="#000000" d="M1450.1547,-79.9891C1450.1547,-72.291 1450.1547,-63.0629 1450.1547,-54.2561"/>
<polygon fill="#000000" stroke="#000000" points="1453.6548,-54.2282 1450.1547,-44.2282 1446.6548,-54.2282 1453.6548,-54.2282"/>
</g>
<!-- n7 -->
<g id="node8" class="node">
<title>n7</title>
<ellipse fill="none" stroke="#000000" cx="63.1547" cy="-98" rx="63.3097" ry="18"/>
<text text-anchor="middle" x="63.1547" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc1_round 0.5</text>
</g>
<!-- n16 -->
<g id="node17" class="node">
<title>n16</title>
<polygon fill="none" stroke="#000000" points="183.5915,-40 74.7178,-40 74.7178,-4 183.5915,-4 183.5915,-40"/>
<polygon fill="none" stroke="#000000" points="187.5893,-44 70.7201,-44 70.7201,0 187.5893,0 187.5893,-44"/>
<text text-anchor="middle" x="129.1547" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(round FRUIT2)</text>
</g>
<!-- n7&#45;&gt;n16 -->
<g id="edge8" class="edge">
<title>n7-&gt;n16</title>
<path fill="none" stroke="#000000" d="M78.4623,-80.373C85.854,-71.8614 94.9271,-61.4135 103.3444,-51.721"/>
<polygon fill="#000000" stroke="#000000" points="105.9952,-54.0064 109.9095,-44.1611 100.71,-49.4165 105.9952,-54.0064"/>
</g>
<!-- n8 -->
<g id="node9" class="node">
<title>n8</title>
<ellipse fill="none" stroke="#000000" cx="370.1547" cy="-98" rx="106.2751" ry="18"/>
<text text-anchor="middle" x="370.1547" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">etc1_yellow 0.9166666667</text>
</g>
<!-- n17 -->
<g id="node18" class="node">
<title>n17</title>
<polygon fill="none" stroke="#000000" points="376.5189,-40 261.7904,-40 261.7904,-4 376.5189,-4 376.5189,-40"/>
<polygon fill="none" stroke="#000000" points="380.5312,-44 257.7781,-44 257.7781,0 380.5312,0 380.5312,-44"/>
<text text-anchor="middle" x="319.1547" y="-17.8" font-family="Times,serif" font-size="14.00" fill="#000000">(yellow FRUIT2)</text>
</g>
<!-- n8&#45;&gt;n17 -->
<g id="edge10" class="edge">
<title>n8-&gt;n17</title>
<path fill="none" stroke="#000000" d="M358.0684,-79.9891C352.5657,-71.7889 345.8979,-61.8527 339.6479,-52.539"/>
<polygon fill="#000000" stroke="#000000" points="342.5495,-50.5816 334.071,-44.2282 336.7369,-54.4822 342.5495,-50.5816"/>
</g>
<!-- n9&#45;&gt;n16 -->
<g id="edge9" class="edge">
<title>n9-&gt;n16</title>
<path fill="none" stroke="#000000" d="M179.5136,-79.9891C172.2471,-71.6216 163.4108,-61.4464 155.1809,-51.9696"/>
<polygon fill="#000000" stroke="#000000" points="157.6576,-49.4837 148.4581,-44.2282 152.3724,-54.0735 157.6576,-49.4837"/>
</g>
<!-- n9&#45;&gt;n17 -->
<g id="edge11" class="edge">
<title>n9-&gt;n17</title>
<path fill="none" stroke="#000000" d="M224.5409,-79.9891C239.2853,-70.9522 257.4698,-59.8068 273.944,-49.7098"/>
<polygon fill="#000000" stroke="#000000" points="276.1905,-52.438 282.8876,-44.2282 272.5326,-46.4698 276.1905,-52.438"/>
</g>
</g>
</svg>
      <p>Well, that is a little bit better. In the second-most probable interpretation, one of our fruits (FRUIT2) has been identified as a lime. That is a fine start, but what about the others? If you start graphing out all of the next-most-probable solutions, you'll find that it takes quite a while to find exactly the interpretation that you are looking for. You'll find some solutions where one fruit is classified, others where that same fruit has a different class altogether, others where there are two fruits that are classified, and still others where <u>multiple</u> classes are assigned to the same fruit!</p>

      <p>So this really gets at the heart of the matter: interpretation is not the same thing as classification. In classification problems like this, we want exactly one class assigned to each instance - no more, no less. Any solution that doesn't meet this criteria is <u>inadmissible</u>. </p>

      <p>At this point, you might be inclined to try to knowledge-engineer your way out of this problem. Can't we just add a few axioms to our knowledge base to constrain the set of possible solutions to only those that are admissible? Good idea, at least in principle. What we <u>wish</u> we could express is something like the following:</p>

      <pre>;; Anything with these features must be a lemon or a lime
(if (or (round x) (not_rount x) (yellow x) (not_yellow x))
    (xor (lemon x)
         (lime x)))</pre>

      <p>Unfortunately, this isn't going to work. Why? This axiom is not a <u>definite clause</u> in first-order logic, and that is the only kind of axiom that <code>etcabductionpy</code> can handle. The disjunction in the antecedent (the 'or' part) requires some ability to express negation, which isn't supported. An equally hard part is in the consequent, where we want to express an exclusive-or relationship (the 'xor' part): either the <code>x</code> is a lime or a lemon, but not both. This too requires disjunction and negation, neither of which is supported by the current software.</p>

      <p>There are other tricks you might try, but none of them are great. You could try removing all of the prior probabilities of the features - leaving only solutions where the features are explained by class labels. This sort-of works, except you are still left with solutions where the fruit are assigned two classes.</p>

      <p>What we really want is some way to filter out the bad solutions, leaving only solutions where each fruit is assigned exactly one class label. Unfortunately, the software doesn't provide you with an easy way to do this filtering. However, we could write a short program to do this filtering for us -- we just need to figure out how to retain only admissible solutions.</p>
      
      <p>For this particular problem, there is a very hackish way we can do this with a one-line shell script. Using the <code>awk</code> command, we can filter out all solutions that don't have exactly four occurences of <code>etc0</code>. By convention, <code>etc0</code> is used to explain things by their prior probability - used both for class labels and features. As a consequence of our particular knowledge base, solutions containing exactly four of these prior probabilities will be exactly those where these priors are each assigned to class labels for the four fruit, and not to any of the features. Here's a bit of code that finds all solutions, assigns a consequtive number to each solution, and then filters out all of the ones that do not have exactly four prior probabilities.</p>

      <pre>> python etcabductionpy -i lemon-lime.lisp -a | cat -n | awk 'gsub(/etc0/,"etc0") == 4'
	
   251	((etc0_lemon 0.4 FRUIT1) (etc0_lemon 0.4 FRUIT3) (etc0_lime 0.6 FRUIT2) (etc0_lime 0.6 FRUIT4) (etc1_not_yellow 0.08333333333 FRUIT4) (etc1_round 0.5 FRUIT2) (etc1_round 0.5 FRUIT4) (etc1_yellow 0.9166666667 FRUIT2) (etc2_not_round 0.925 FRUIT1) (etc2_not_round 0.925 FRUIT3) (etc2_not_yellow 0.125 FRUIT3) (etc2_yellow 0.875 FRUIT1))
   392	((etc0_lemon 0.4 FRUIT3) (etc0_lime 0.6 FRUIT1) (etc0_lime 0.6 FRUIT2) (etc0_lime 0.6 FRUIT4) (etc1_not_round 0.5 FRUIT1) (etc1_not_yellow 0.08333333333 FRUIT4) (etc1_round 0.5 FRUIT2) (etc1_round 0.5 FRUIT4) (etc1_yellow 0.9166666667 FRUIT1) (etc1_yellow 0.9166666667 FRUIT2) (etc2_not_round 0.925 FRUIT3) (etc2_not_yellow 0.125 FRUIT3))
   853	((etc0_lemon 0.4 FRUIT1) (etc0_lime 0.6 FRUIT2) (etc0_lime 0.6 FRUIT3) (etc0_lime 0.6 FRUIT4) (etc1_not_round 0.5 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT4) (etc1_round 0.5 FRUIT2) (etc1_round 0.5 FRUIT4) (etc1_yellow 0.9166666667 FRUIT2) (etc2_not_round 0.925 FRUIT1) (etc2_yellow 0.875 FRUIT1))
  1067	((etc0_lime 0.6 FRUIT1) (etc0_lime 0.6 FRUIT2) (etc0_lime 0.6 FRUIT3) (etc0_lime 0.6 FRUIT4) (etc1_not_round 0.5 FRUIT1) (etc1_not_round 0.5 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT4) (etc1_round 0.5 FRUIT2) (etc1_round 0.5 FRUIT4) (etc1_yellow 0.9166666667 FRUIT1) (etc1_yellow 0.9166666667 FRUIT2))
  2591	((etc0_lemon 0.4 FRUIT1) (etc0_lemon 0.4 FRUIT3) (etc0_lemon 0.4 FRUIT4) (etc0_lime 0.6 FRUIT2) (etc1_round 0.5 FRUIT2) (etc1_yellow 0.9166666667 FRUIT2) (etc2_not_round 0.925 FRUIT1) (etc2_not_round 0.925 FRUIT3) (etc2_not_yellow 0.125 FRUIT3) (etc2_not_yellow 0.125 FRUIT4) (etc2_round 0.075 FRUIT4) (etc2_yellow 0.875 FRUIT1))
  2776	((etc0_lemon 0.4 FRUIT3) (etc0_lemon 0.4 FRUIT4) (etc0_lime 0.6 FRUIT1) (etc0_lime 0.6 FRUIT2) (etc1_not_round 0.5 FRUIT1) (etc1_round 0.5 FRUIT2) (etc1_yellow 0.9166666667 FRUIT1) (etc1_yellow 0.9166666667 FRUIT2) (etc2_not_round 0.925 FRUIT3) (etc2_not_yellow 0.125 FRUIT3) (etc2_not_yellow 0.125 FRUIT4) (etc2_round 0.075 FRUIT4))
  3135	((etc0_lemon 0.4 FRUIT1) (etc0_lemon 0.4 FRUIT2) (etc0_lemon 0.4 FRUIT3) (etc0_lime 0.6 FRUIT4) (etc1_not_yellow 0.08333333333 FRUIT4) (etc1_round 0.5 FRUIT4) (etc2_not_round 0.925 FRUIT1) (etc2_not_round 0.925 FRUIT3) (etc2_not_yellow 0.125 FRUIT3) (etc2_round 0.075 FRUIT2) (etc2_yellow 0.875 FRUIT1) (etc2_yellow 0.875 FRUIT2))
  3361	((etc0_lemon 0.4 FRUIT2) (etc0_lemon 0.4 FRUIT3) (etc0_lime 0.6 FRUIT1) (etc0_lime 0.6 FRUIT4) (etc1_not_round 0.5 FRUIT1) (etc1_not_yellow 0.08333333333 FRUIT4) (etc1_round 0.5 FRUIT4) (etc1_yellow 0.9166666667 FRUIT1) (etc2_not_round 0.925 FRUIT3) (etc2_not_yellow 0.125 FRUIT3) (etc2_round 0.075 FRUIT2) (etc2_yellow 0.875 FRUIT2))
  3362	((etc0_lemon 0.4 FRUIT1) (etc0_lemon 0.4 FRUIT4) (etc0_lime 0.6 FRUIT2) (etc0_lime 0.6 FRUIT3) (etc1_not_round 0.5 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT3) (etc1_round 0.5 FRUIT2) (etc1_yellow 0.9166666667 FRUIT2) (etc2_not_round 0.925 FRUIT1) (etc2_not_yellow 0.125 FRUIT4) (etc2_round 0.075 FRUIT4) (etc2_yellow 0.875 FRUIT1))
  3600	((etc0_lemon 0.4 FRUIT4) (etc0_lime 0.6 FRUIT1) (etc0_lime 0.6 FRUIT2) (etc0_lime 0.6 FRUIT3) (etc1_not_round 0.5 FRUIT1) (etc1_not_round 0.5 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT3) (etc1_round 0.5 FRUIT2) (etc1_yellow 0.9166666667 FRUIT1) (etc1_yellow 0.9166666667 FRUIT2) (etc2_not_yellow 0.125 FRUIT4) (etc2_round 0.075 FRUIT4))
  4032	((etc0_lemon 0.4 FRUIT1) (etc0_lemon 0.4 FRUIT2) (etc0_lime 0.6 FRUIT3) (etc0_lime 0.6 FRUIT4) (etc1_not_round 0.5 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT4) (etc1_round 0.5 FRUIT4) (etc2_not_round 0.925 FRUIT1) (etc2_round 0.075 FRUIT2) (etc2_yellow 0.875 FRUIT1) (etc2_yellow 0.875 FRUIT2))
  4265	((etc0_lemon 0.4 FRUIT2) (etc0_lime 0.6 FRUIT1) (etc0_lime 0.6 FRUIT3) (etc0_lime 0.6 FRUIT4) (etc1_not_round 0.5 FRUIT1) (etc1_not_round 0.5 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT4) (etc1_round 0.5 FRUIT4) (etc1_yellow 0.9166666667 FRUIT1) (etc2_round 0.075 FRUIT2) (etc2_yellow 0.875 FRUIT2))
  5601	((etc0_lemon 0.4 FRUIT1) (etc0_lemon 0.4 FRUIT2) (etc0_lemon 0.4 FRUIT3) (etc0_lemon 0.4 FRUIT4) (etc2_not_round 0.925 FRUIT1) (etc2_not_round 0.925 FRUIT3) (etc2_not_yellow 0.125 FRUIT3) (etc2_not_yellow 0.125 FRUIT4) (etc2_round 0.075 FRUIT2) (etc2_round 0.075 FRUIT4) (etc2_yellow 0.875 FRUIT1) (etc2_yellow 0.875 FRUIT2))
  5715	((etc0_lemon 0.4 FRUIT2) (etc0_lemon 0.4 FRUIT3) (etc0_lemon 0.4 FRUIT4) (etc0_lime 0.6 FRUIT1) (etc1_not_round 0.5 FRUIT1) (etc1_yellow 0.9166666667 FRUIT1) (etc2_not_round 0.925 FRUIT3) (etc2_not_yellow 0.125 FRUIT3) (etc2_not_yellow 0.125 FRUIT4) (etc2_round 0.075 FRUIT2) (etc2_round 0.075 FRUIT4) (etc2_yellow 0.875 FRUIT2))
  5972	((etc0_lemon 0.4 FRUIT1) (etc0_lemon 0.4 FRUIT2) (etc0_lemon 0.4 FRUIT4) (etc0_lime 0.6 FRUIT3) (etc1_not_round 0.5 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT3) (etc2_not_round 0.925 FRUIT1) (etc2_not_yellow 0.125 FRUIT4) (etc2_round 0.075 FRUIT2) (etc2_round 0.075 FRUIT4) (etc2_yellow 0.875 FRUIT1) (etc2_yellow 0.875 FRUIT2))
  6056	((etc0_lemon 0.4 FRUIT2) (etc0_lemon 0.4 FRUIT4) (etc0_lime 0.6 FRUIT1) (etc0_lime 0.6 FRUIT3) (etc1_not_round 0.5 FRUIT1) (etc1_not_round 0.5 FRUIT3) (etc1_not_yellow 0.08333333333 FRUIT3) (etc1_yellow 0.9166666667 FRUIT1) (etc2_not_yellow 0.125 FRUIT4) (etc2_round 0.075 FRUIT2) (etc2_round 0.075 FRUIT4) (etc2_yellow 0.875 FRUIT2))</pre>

      <p>Good! We are left with exactly 16 admissible solutions, which is equal to 2<sup>4</sup>, or two possible solutions for each of the four fruit. So every possible combinations of classifications is represented in the list of all interpretations.</p>
      
      <p>Furthermore, we can see that it is solution number 251 that is the most-probable of those that are admissible. Let's see what that particular one looks like.</p>
      <pre>> python etcabductionpy -i lemon-lime.lisp -a -s 251 -g | ./util/dot2safari</pre>

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="540pt" viewBox="0.00 0.00 2032.87 196.00">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 192)">
<title>proof</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-192 2028.87,-192 2028.87,4 -4,4"/>
<!-- n0 -->
<g id="node1" class="node"><title>n0</title>
<ellipse fill="none" stroke="black" cx="248.72" cy="-170" rx="71.5117" ry="18"/>
<text text-anchor="middle" x="248.72" y="-165.8" font-family="Times,serif" font-size="14.00">etc0_lemmon 0.4</text>
</g>
<!-- n12 -->
<g id="node13" class="node"><title>n12</title>
<polygon fill="none" stroke="black" points="304.486,-116 192.954,-116 192.954,-80 304.486,-80 304.486,-116"/>
<text text-anchor="middle" x="248.72" y="-93.8" font-family="Times,serif" font-size="14.00">(lemon FRUIT1)</text>
</g>
<!-- n0&#45;&gt;n12 -->
<g id="edge1" class="edge"><title>n0-&gt;n12</title>
<path fill="none" stroke="black" d="M248.72,-151.697C248.72,-143.983 248.72,-134.712 248.72,-126.112"/>
<polygon fill="black" stroke="black" points="252.22,-126.104 248.72,-116.104 245.22,-126.104 252.22,-126.104"/>
</g>
<!-- n1 -->
<g id="node2" class="node"><title>n1</title>
<ellipse fill="none" stroke="black" cx="739.72" cy="-170" rx="71.5117" ry="18"/>
<text text-anchor="middle" x="739.72" y="-165.8" font-family="Times,serif" font-size="14.00">etc0_lemmon 0.4</text>
</g>
<!-- n13 -->
<g id="node14" class="node"><title>n13</title>
<polygon fill="none" stroke="black" points="795.486,-116 683.954,-116 683.954,-80 795.486,-80 795.486,-116"/>
<text text-anchor="middle" x="739.72" y="-93.8" font-family="Times,serif" font-size="14.00">(lemon FRUIT3)</text>
</g>
<!-- n1&#45;&gt;n13 -->
<g id="edge2" class="edge"><title>n1-&gt;n13</title>
<path fill="none" stroke="black" d="M739.72,-151.697C739.72,-143.983 739.72,-134.712 739.72,-126.112"/>
<polygon fill="black" stroke="black" points="743.22,-126.104 739.72,-116.104 736.22,-126.104 743.22,-126.104"/>
</g>
<!-- n2 -->
<g id="node3" class="node"><title>n2</title>
<ellipse fill="none" stroke="black" cx="1208.72" cy="-170" rx="58.4823" ry="18"/>
<text text-anchor="middle" x="1208.72" y="-165.8" font-family="Times,serif" font-size="14.00">etc0_lime 0.6</text>
</g>
<!-- n14 -->
<g id="node15" class="node"><title>n14</title>
<polygon fill="none" stroke="black" points="1259.38,-116 1158.06,-116 1158.06,-80 1259.38,-80 1259.38,-116"/>
<text text-anchor="middle" x="1208.72" y="-93.8" font-family="Times,serif" font-size="14.00">(lime FRUIT2)</text>
</g>
<!-- n2&#45;&gt;n14 -->
<g id="edge3" class="edge"><title>n2-&gt;n14</title>
<path fill="none" stroke="black" d="M1208.72,-151.697C1208.72,-143.983 1208.72,-134.712 1208.72,-126.112"/>
<polygon fill="black" stroke="black" points="1212.22,-126.104 1208.72,-116.104 1205.22,-126.104 1212.22,-126.104"/>
</g>
<!-- n3 -->
<g id="node4" class="node"><title>n3</title>
<ellipse fill="none" stroke="black" cx="1829.72" cy="-170" rx="58.4823" ry="18"/>
<text text-anchor="middle" x="1829.72" y="-165.8" font-family="Times,serif" font-size="14.00">etc0_lime 0.6</text>
</g>
<!-- n15 -->
<g id="node16" class="node"><title>n15</title>
<polygon fill="none" stroke="black" points="1880.38,-116 1779.06,-116 1779.06,-80 1880.38,-80 1880.38,-116"/>
<text text-anchor="middle" x="1829.72" y="-93.8" font-family="Times,serif" font-size="14.00">(lime FRUIT4)</text>
</g>
<!-- n3&#45;&gt;n15 -->
<g id="edge4" class="edge"><title>n3-&gt;n15</title>
<path fill="none" stroke="black" d="M1829.72,-151.697C1829.72,-143.983 1829.72,-134.712 1829.72,-126.112"/>
<polygon fill="black" stroke="black" points="1833.22,-126.104 1829.72,-116.104 1826.22,-126.104 1833.22,-126.104"/>
</g>
<!-- n4 -->
<g id="node5" class="node"><title>n4</title>
<ellipse fill="none" stroke="black" cx="1634.72" cy="-98" rx="126.563" ry="18"/>
<text text-anchor="middle" x="1634.72" y="-93.8" font-family="Times,serif" font-size="14.00">etc1_not_yellow 0.08333333333</text>
</g>
<!-- n22 -->
<g id="node23" class="node"><title>n22</title>
<polygon fill="none" stroke="black" points="1726.48,-40 1586.96,-40 1586.96,-4 1726.48,-4 1726.48,-40"/>
<polygon fill="none" stroke="black" points="1730.49,-44 1582.95,-44 1582.95,-0 1730.49,-0 1730.49,-44"/>
<text text-anchor="middle" x="1656.72" y="-17.8" font-family="Times,serif" font-size="14.00">(not_yellow FRUIT4)</text>
</g>
<!-- n4&#45;&gt;n22 -->
<g id="edge17" class="edge"><title>n4-&gt;n22</title>
<path fill="none" stroke="black" d="M1639.82,-79.8369C1642.13,-72.0816 1644.92,-62.6755 1647.57,-53.7659"/>
<polygon fill="black" stroke="black" points="1650.97,-54.615 1650.47,-44.0322 1644.26,-52.6202 1650.97,-54.615"/>
</g>
<!-- n5 -->
<g id="node6" class="node"><title>n5</title>
<ellipse fill="none" stroke="black" cx="1076.72" cy="-98" rx="63.3097" ry="18"/>
<text text-anchor="middle" x="1076.72" y="-93.8" font-family="Times,serif" font-size="14.00">etc1_round 0.5</text>
</g>
<!-- n20 -->
<g id="node21" class="node"><title>n20</title>
<polygon fill="none" stroke="black" points="1173.16,-40 1064.28,-40 1064.28,-4 1173.16,-4 1173.16,-40"/>
<polygon fill="none" stroke="black" points="1177.15,-44 1060.29,-44 1060.29,-0 1177.15,-0 1177.15,-44"/>
<text text-anchor="middle" x="1118.72" y="-17.8" font-family="Times,serif" font-size="14.00">(round FRUIT2)</text>
</g>
<!-- n5&#45;&gt;n20 -->
<g id="edge13" class="edge"><title>n5-&gt;n20</title>
<path fill="none" stroke="black" d="M1086.46,-79.8369C1091.01,-71.8314 1096.55,-62.0669 1101.75,-52.9053"/>
<polygon fill="black" stroke="black" points="1104.89,-54.4567 1106.78,-44.0322 1098.8,-51.0014 1104.89,-54.4567"/>
</g>
<!-- n6 -->
<g id="node7" class="node"><title>n6</title>
<ellipse fill="none" stroke="black" cx="1961.72" cy="-98" rx="63.3097" ry="18"/>
<text text-anchor="middle" x="1961.72" y="-93.8" font-family="Times,serif" font-size="14.00">etc1_round 0.5</text>
</g>
<!-- n23 -->
<g id="node24" class="node"><title>n23</title>
<polygon fill="none" stroke="black" points="1950.16,-40 1841.28,-40 1841.28,-4 1950.16,-4 1950.16,-40"/>
<polygon fill="none" stroke="black" points="1954.15,-44 1837.29,-44 1837.29,-0 1954.15,-0 1954.15,-44"/>
<text text-anchor="middle" x="1895.72" y="-17.8" font-family="Times,serif" font-size="14.00">(round FRUIT4)</text>
</g>
<!-- n6&#45;&gt;n23 -->
<g id="edge19" class="edge"><title>n6-&gt;n23</title>
<path fill="none" stroke="black" d="M1946.74,-80.2083C1939.24,-71.7963 1929.95,-61.3741 1921.35,-51.7394"/>
<polygon fill="black" stroke="black" points="1923.93,-49.3682 1914.66,-44.2349 1918.7,-54.0275 1923.93,-49.3682"/>
</g>
<!-- n7 -->
<g id="node8" class="node"><title>n7</title>
<ellipse fill="none" stroke="black" cx="1383.72" cy="-98" rx="106.275" ry="18"/>
<text text-anchor="middle" x="1383.72" y="-93.8" font-family="Times,serif" font-size="14.00">etc1_yellow 0.9166666667</text>
</g>
<!-- n21 -->
<g id="node22" class="node"><title>n21</title>
<polygon fill="none" stroke="black" points="1398.08,-40 1283.36,-40 1283.36,-4 1398.08,-4 1398.08,-40"/>
<polygon fill="none" stroke="black" points="1402.1,-44 1279.34,-44 1279.34,-0 1402.1,-0 1402.1,-44"/>
<text text-anchor="middle" x="1340.72" y="-17.8" font-family="Times,serif" font-size="14.00">(yellow FRUIT2)</text>
</g>
<!-- n7&#45;&gt;n21 -->
<g id="edge15" class="edge"><title>n7-&gt;n21</title>
<path fill="none" stroke="black" d="M1373.75,-79.8369C1369.1,-71.8314 1363.42,-62.0669 1358.1,-52.9053"/>
<polygon fill="black" stroke="black" points="1360.99,-50.92 1352.94,-44.0322 1354.94,-54.4369 1360.99,-50.92"/>
</g>
<!-- n8 -->
<g id="node9" class="node"><title>n8</title>
<ellipse fill="none" stroke="black" cx="87.7203" cy="-98" rx="87.9412" ry="18"/>
<text text-anchor="middle" x="87.7203" y="-93.8" font-family="Times,serif" font-size="14.00">etc2_not_round 0.925</text>
</g>
<!-- n16 -->
<g id="node17" class="node"><title>n16</title>
<polygon fill="none" stroke="black" points="159.55,-40 25.891,-40 25.891,-4 159.55,-4 159.55,-40"/>
<polygon fill="none" stroke="black" points="163.545,-44 21.896,-44 21.896,-0 163.545,-0 163.545,-44"/>
<text text-anchor="middle" x="92.7203" y="-17.8" font-family="Times,serif" font-size="14.00">(not_round FRUIT1)</text>
</g>
<!-- n8&#45;&gt;n16 -->
<g id="edge5" class="edge"><title>n8-&gt;n16</title>
<path fill="none" stroke="black" d="M88.88,-79.8369C89.3984,-72.165 90.0259,-62.8775 90.6221,-54.0535"/>
<polygon fill="black" stroke="black" points="94.117,-54.2454 91.2992,-44.0322 87.133,-53.7735 94.117,-54.2454"/>
</g>
<!-- n9 -->
<g id="node10" class="node"><title>n9</title>
<ellipse fill="none" stroke="black" cx="578.72" cy="-98" rx="87.9412" ry="18"/>
<text text-anchor="middle" x="578.72" y="-93.8" font-family="Times,serif" font-size="14.00">etc2_not_round 0.925</text>
</g>
<!-- n18 -->
<g id="node19" class="node"><title>n18</title>
<polygon fill="none" stroke="black" points="686.55,-40 552.891,-40 552.891,-4 686.55,-4 686.55,-40"/>
<polygon fill="none" stroke="black" points="690.545,-44 548.896,-44 548.896,-0 690.545,-0 690.545,-44"/>
<text text-anchor="middle" x="619.72" y="-17.8" font-family="Times,serif" font-size="14.00">(not_round FRUIT3)</text>
</g>
<!-- n9&#45;&gt;n18 -->
<g id="edge9" class="edge"><title>n9-&gt;n18</title>
<path fill="none" stroke="black" d="M588.23,-79.8369C592.665,-71.8314 598.075,-62.0669 603.151,-52.9053"/>
<polygon fill="black" stroke="black" points="606.282,-54.4756 608.067,-44.0322 600.159,-51.0831 606.282,-54.4756"/>
</g>
<!-- n10 -->
<g id="node11" class="node"><title>n10</title>
<ellipse fill="none" stroke="black" cx="904.72" cy="-98" rx="91.3153" ry="18"/>
<text text-anchor="middle" x="904.72" y="-93.8" font-family="Times,serif" font-size="14.00">etc2_not_yellow 0.125</text>
</g>
<!-- n19 -->
<g id="node20" class="node"><title>n19</title>
<polygon fill="none" stroke="black" points="933.479,-40 793.962,-40 793.962,-4 933.479,-4 933.479,-40"/>
<polygon fill="none" stroke="black" points="937.486,-44 789.954,-44 789.954,-0 937.486,-0 937.486,-44"/>
<text text-anchor="middle" x="863.72" y="-17.8" font-family="Times,serif" font-size="14.00">(not_yellow FRUIT3)</text>
</g>
<!-- n10&#45;&gt;n19 -->
<g id="edge11" class="edge"><title>n10-&gt;n19</title>
<path fill="none" stroke="black" d="M895.211,-79.8369C890.776,-71.8314 885.365,-62.0669 880.289,-52.9053"/>
<polygon fill="black" stroke="black" points="883.281,-51.0831 875.373,-44.0322 877.158,-54.4756 883.281,-51.0831"/>
</g>
<!-- n11 -->
<g id="node12" class="node"><title>n11</title>
<ellipse fill="none" stroke="black" cx="397.72" cy="-98" rx="75.3707" ry="18"/>
<text text-anchor="middle" x="397.72" y="-93.8" font-family="Times,serif" font-size="14.00">etc2_yellow 0.875</text>
</g>
<!-- n17 -->
<g id="node18" class="node"><title>n17</title>
<polygon fill="none" stroke="black" points="380.085,-40 265.356,-40 265.356,-4 380.085,-4 380.085,-40"/>
<polygon fill="none" stroke="black" points="384.097,-44 261.344,-44 261.344,-0 384.097,-0 384.097,-44"/>
<text text-anchor="middle" x="322.72" y="-17.8" font-family="Times,serif" font-size="14.00">(yellow FRUIT1)</text>
</g>
<!-- n11&#45;&gt;n17 -->
<g id="edge7" class="edge"><title>n11-&gt;n17</title>
<path fill="none" stroke="black" d="M380.702,-80.2083C372.092,-71.713 361.404,-61.1675 351.558,-51.4535"/>
<polygon fill="black" stroke="black" points="353.819,-48.7669 344.242,-44.2349 348.902,-53.7498 353.819,-48.7669"/>
</g>
<!-- n12&#45;&gt;n16 -->
<g id="edge6" class="edge"><title>n12-&gt;n16</title>
<path fill="none" stroke="black" d="M212.539,-79.8369C192.849,-70.4972 168.113,-58.7632 146.236,-48.3857"/>
<polygon fill="black" stroke="black" points="147.594,-45.1558 137.058,-44.0322 144.593,-51.4804 147.594,-45.1558"/>
</g>
<!-- n12&#45;&gt;n17 -->
<g id="edge8" class="edge"><title>n12-&gt;n17</title>
<path fill="none" stroke="black" d="M265.883,-79.8369C274.389,-71.3311 284.881,-60.8395 294.525,-51.1952"/>
<polygon fill="black" stroke="black" points="297.092,-53.5782 301.688,-44.0322 292.142,-48.6284 297.092,-53.5782"/>
</g>
<!-- n13&#45;&gt;n18 -->
<g id="edge10" class="edge"><title>n13-&gt;n18</title>
<path fill="none" stroke="black" d="M711.888,-79.8369C697.284,-70.8307 679.069,-59.5983 662.698,-49.5026"/>
<polygon fill="black" stroke="black" points="664.175,-46.302 653.827,-44.0322 660.501,-52.2602 664.175,-46.302"/>
</g>
<!-- n13&#45;&gt;n19 -->
<g id="edge12" class="edge"><title>n13-&gt;n19</title>
<path fill="none" stroke="black" d="M768.48,-79.8369C783.711,-70.7473 802.742,-59.3901 819.78,-49.2225"/>
<polygon fill="black" stroke="black" points="821.684,-52.1623 828.477,-44.0322 818.096,-46.1513 821.684,-52.1623"/>
</g>
<!-- n14&#45;&gt;n20 -->
<g id="edge14" class="edge"><title>n14-&gt;n20</title>
<path fill="none" stroke="black" d="M1187.85,-79.8369C1177.3,-71.1643 1164.24,-60.4273 1152.32,-50.6289"/>
<polygon fill="black" stroke="black" points="1154.25,-47.6798 1144.3,-44.0322 1149.8,-53.0868 1154.25,-47.6798"/>
</g>
<!-- n14&#45;&gt;n21 -->
<g id="edge16" class="edge"><title>n14-&gt;n21</title>
<path fill="none" stroke="black" d="M1239.34,-79.8369C1255.7,-70.6639 1276.18,-59.1815 1294.44,-48.9429"/>
<polygon fill="black" stroke="black" points="1296.19,-51.9753 1303.2,-44.0322 1292.77,-45.8693 1296.19,-51.9753"/>
</g>
<!-- n15&#45;&gt;n22 -->
<g id="edge18" class="edge"><title>n15-&gt;n22</title>
<path fill="none" stroke="black" d="M1789.6,-79.8369C1767.47,-70.3721 1739.59,-58.4485 1715.09,-47.9695"/>
<polygon fill="black" stroke="black" points="1716.46,-44.7471 1705.89,-44.0322 1713.71,-51.183 1716.46,-44.7471"/>
</g>
<!-- n15&#45;&gt;n23 -->
<g id="edge20" class="edge"><title>n15-&gt;n23</title>
<path fill="none" stroke="black" d="M1845.03,-79.8369C1852.47,-71.4979 1861.61,-61.2501 1870.07,-51.7634"/>
<polygon fill="black" stroke="black" points="1872.92,-53.8248 1876.96,-44.0322 1867.69,-49.1655 1872.92,-53.8248"/>
</g>
</g>
</svg>


      <p>Now that is much better! The final result? The best <u>admissible</u> interpretation of the observables is that we have two lemons (<code>FRUIT1</code> and <code>FRUIT3</code>) and two limes (<code>FRUIT2</code> and <code>FRUIT4</code>).</p>

      <p>For those of you who have taken an introductory Artificial Intelligence course in your life, some of this may seem strangely familiar. Indeed, we have just used Etcetera Abduction to model a <u>Naive Bayes Classifier</u>. In general, a true Bayesian classifier tries to find the maximum joint probability of the observable features along with some number of possible class labels. In the Naive Bayes variant, the observation of any given feature given a class label is assumed to be probabilistically independent from that of any other feature. This is a wildly inappropriate assumption in many domains, even when talking about the yellowness and roundness of fruit. Still, Naive Bayes classification tends to perform quite well in practice for many problems, and is a standard baseline for comparison when considering fancier machine learning approaches.</p>

      <p>The important thing to note is that we're not doing something analogous to Naive Bayes, but rather computing our answer in exactly the same way as it is done in every Naive Bayes implementation, at least mathematically speaking. Naive Bayes algorithms typically iterate through each of the possible class labels, taking the product of the prior probability of the class and all of the conditional probabilities of the observable features given the class. For each of the four fruit in the graphic above, this is exactly what is computed by multiplying the numbers in the three ovals above each pair of observations (three assumptions per fruit). The oval in the top center is the prior probability of the class (<code>lemon</code> or <code>lime</code>), and the ovals on either side are the conditional probabilities of the observable feature given the class. If you multiply these three numbers, you'll get exactly the same number computed in implementations of naive Bayes for a candidate class. If in addition we knew the true joint probability of the observables (the ignored denominator in Naive Bayes), we could divide our product by this joint probability to compute the (Naive) probability of the class. In classification tasks, this denominator is ignored because it is both unknown (typically) and constant across possible class labels. Accordingly, Naive Bayes implementations are just looking for the <u>maximum</u> product in order to make its class label prediction. Etcetera Abduction ranks all possible interpretations by probability, so the interpretation with the most likely class labels (for all four fruit at once!) shows up as the top result among the <u>admissible</u> solutions.</p>

      <p>So, is Etcetera Abduction just a complicated way of doing Naive Bayes classifications? No, but you can certainly use Etcetera Abduction in this manner if you so choose. But you shouldn't. It would be widely inefficient to do so, as you would be exploring many, many, many solutions in the search space that are not actually admissible for your particular needs. If you are really only interested in classification, then you are much better off using a traditional classification algorithm.</p>
    

  </body>
</html>
